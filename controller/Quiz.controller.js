sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox"],(e,t,s)=>{"use strict";return e.extend("bq.benqyou.controller.Quiz",{startQuiz(){const e=this.getView().getModel("loaderModel");e.setProperty("/correctNum",0);e.setProperty("/wrongNum",0);e.setProperty("/isQuestionVisible",true);this._aOriginalQuestions=JSON.parse(JSON.stringify(this.getView().getModel("loaderModel").getData()));this.nextQuestion(true)},nextQuestion(e){const t=this.getView().getModel("loaderModel");const s=t.getData();const r=this.byId("pageNum");const o=this._aOriginalQuestions.length;const i=o-s.length+1;r.setText(`${i}/${o}`);if(!e){const e=this.checkAnswer();t.setProperty("/correctNum",t.getProperty("/correctNum")+(e?1:0));t.setProperty("/wrongNum",t.getProperty("/wrongNum")+(e?0:1))}if(s.length>0){const e=s[0].value;this.prevCorrectAnswer=e;this.byId("question").setText(s[0].key);this.setAnswers(e);s.shift()}else{this.showFinalMessage()}},setAnswers(e){let t=JSON.parse(JSON.stringify(this._aOriginalQuestions));t=t.filter(t=>t.value!==e);const s=t.sort(()=>Math.random()-.5).slice(0,3);s.push({key:e,value:e});s.sort(()=>Math.random()-.5);s.forEach(e=>{this.byId(`RB1-${s.indexOf(e)+1}`).setText(e.value)})},checkAnswer(){const e=this.byId("buttonGroup").getSelectedButton().getText();const r=this.getView().getModel("i18n").getResourceBundle();if(e===this.prevCorrectAnswer){t.show(r.getText("correctAnswer"));return true}else{s.error(`${r.getText("wrongAnswer")} ${this.prevCorrectAnswer}`);return false}},showFinalMessage(){const e=this.getView().getModel("i18n").getResourceBundle();const t=e.getText("finalMessage");s.information(t.replace("{0}",this.getView().getModel("loaderModel").getProperty("/correctNum")).replace("{1}",this._aOriginalQuestions.length),{onClose:()=>{location.reload()}})}})});
//# sourceMappingURL=Quiz.controller.js.map